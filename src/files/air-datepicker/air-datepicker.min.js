!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AirDatepicker=t():e.AirDatepicker=t()}(this,function(){return function(){"use strict";var e,t={d:function(e,i){for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},i={};t.d(i,{default:function(){return K}});var s={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},a={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:s.days,minView:s.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg class="prev"><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg class="next"><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):e}function r(){let{tagName:e="div",className:t="",innerHtml:i="",id:s="",attrs:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement(e);return t&&n.classList.add(...t.split(" ")),s&&(n.id=s),i&&(n.innerHTML=i),a&&h(n,a),n}function h(e,t){for(let[i,s]of Object.entries(t))void 0!==s&&e.setAttribute(i,s);return e}function o(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function l(e){let t=e.getHours(),{hours:i,dayPeriod:s}=d(t);return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:10>e.getDate()?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:c(t),hours12:i,dayPeriod:s,fullHours12:c(i),minutes:e.getMinutes(),fullMinutes:10>e.getMinutes()?"0"+e.getMinutes():e.getMinutes()}}function d(e){return{dayPeriod:e>11?"pm":"am",hours:e%12==0?12:e%12}}function c(e){return e<10?"0"+e:e}function u(e){let t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function p(){let e=[];for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];return i.forEach(t=>{if("object"==typeof t)for(let i in t)t[i]&&e.push(i);else t&&e.push(t)}),e.join(" ")}function m(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.days;if(!e||!t)return!1;let a=l(e),n=l(t);return({[s.days]:a.date===n.date&&a.month===n.month&&a.year===n.year,[s.months]:a.month===n.month&&a.year===n.year,[s.years]:a.year===n.year})[i]}function v(e,t,i){let s=y(e,!1).getTime(),a=y(t,!1).getTime();return i?s>=a:s>a}function g(e,t){return!v(e,t,!0)}function y(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Date(e.getTime());return"boolean"!=typeof t||t||function(e){e.setHours(0,0,0,0)}(i),i}function D(e,t,i){e.length?e.forEach(e=>{e.addEventListener(t,i)}):e.addEventListener(t,i)}function f(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:f(e.parentNode,t))}function w(e,t,i){return e>i?i:e<t?t:e}function b(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return i.filter(e=>e).forEach(t=>{for(let[i,s]of Object.entries(t))if(void 0!==s&&"[object Object]"===s.toString()){let a=void 0!==e[i]?e[i].toString():void 0,n=s.toString(),r=Array.isArray(s)?[]:{};e[i]=e[i]?a!==n?r:e[i]:r,b(e[i],s)}else e[i]=s}),e}function k(e){let t=e;return e instanceof Date||("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&(e+="T00:00:00"),t=new Date(e)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${e}" to Date object`),t=!1),t}function C(e){let t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}function $(e,t,i){var s,a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(s=t))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class M{constructor(){let{type:e,date:t,dp:i,opts:s,body:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),$(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),$(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),$(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),$(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),$(this,"onChangeFocusDate",e=>{if(!e)return void(this.focused&&this.removeFocus());let t=m(e,this.date,this.type);t?this.focus():!t&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),$(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell)),this.type=e,this.singleType=this.type.slice(0,-1),this.date=t,this.dp=i,this.opts=s,this.body=a,this.customData=!1,this.init()}init(){var e;let{onRenderCell:t}=this.opts;t&&(this.customData=t({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(e=this.customData)&&void 0!==e&&e.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:t,month:i,date:s}=l(this.date),a=(null===(e=this.customData)||void 0===e?void 0:e.attrs)||{};this.$cell=r({attrs:{"data-year":t,"data-month":i,"data-date":s,...a}}),this.$cell.adpCell=this}_getClassName(){var e;let t=new Date,{selectOtherMonths:i,selectOtherYears:a}=this.opts,{minDate:n,maxDate:r,isDateDisabled:h}=this.dp,{day:o}=l(this.date),d=this._isOutOfMinMaxRange(),c=h(this.date),u=p("air-datepicker-cell",`-${this.singleType}-`,{"-current-":m(t,this.date,this.type),"-min-date-":n&&m(n,this.date,this.type),"-max-date-":r&&m(r,this.date,this.type)}),v="";switch(this.type){case s.days:v=p({"-weekend-":this.dp.isWeekend(o),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!i||d||c});break;case s.months:v=p({"-disabled-":d});break;case s.years:v=p({"-other-decade-":this.isOtherDecade,"-disabled-":d||this.isOtherDecade&&!a})}return p(u,v,null===(e=this.customData)||void 0===e?void 0:e.classes).split(" ")}_getHtml(){var e;let{year:t,month:i,date:a}=l(this.date),{showOtherMonths:n,showOtherYears:r}=this.opts;if(null!==(e=this.customData)&&void 0!==e&&e.html)return this.customData.html;switch(this.type){case s.days:return!n&&this.isOtherMonth?"":a;case s.months:return this.dp.locale[this.opts.monthsField][i];case s.years:return!r&&this.isOtherDecade?"":t}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{type:i,date:a}=this,{month:n,year:r,date:h}=l(a),o=i===s.days,d=i===s.years,c=!!e&&new Date(r,d?e.getMonth():n,o?h:e.getDate()),u=!!t&&new Date(r,d?t.getMonth():n,o?h:t.getDate());return e&&t?g(c,e)||v(u,t):e?g(c,e):t?v(u,t):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){var e,t,i;let{selectedDates:s,focusDate:a,rangeDateTo:n,rangeDateFrom:r}=this.dp,h=s.length;if(!h)return;let o=r,l=n;if(1===h&&a){let d=v(a,s[0]);o=d?s[0]:a,l=d?a:s[0]}let c=p({"-in-range-":o&&l&&(e=this.date,t=o,i=l,v(e,t)&&g(e,i)),"-range-from-":o&&m(this.date,o,this.type),"-range-to-":l&&m(this.date,l,this.type)});this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),c&&this.$cell.classList.add(...c.split(" "))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){m(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function _(e,t,i){var s,a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(s=t))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let S={[s.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${s.days}-"></div>`,[s.months]:`<div class="air-datepicker-body--cells -${s.months}-"></div>`,[s.years]:`<div class="air-datepicker-body--cells -${s.years}-"></div>`},T=".air-datepicker-cell";class F{constructor(e){let{dp:t,type:i,opts:a}=e;_(this,"handleClick",e=>{let t=e.target.closest(T).adpCell;if(t.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let i=this.dp._checkIfDateIsSelected(t.date,t.type);i?this.dp._handleAlreadySelectedDates(i,t.date):this.dp.selectDate(t.date)}),_(this,"handleDayNameClick",e=>{let t=e.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(t),datepicker:this.dp})}),_(this,"onChangeCurrentView",e=>{e!==this.type?this.hide():(this.show(),this.render())}),_(this,"onMouseOverCell",e=>{let t=f(e.target,T);this.dp.setFocusDate(!!t&&t.adpCell.date)}),_(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),_(this,"onClickBody",e=>{let{onClickDayName:t}=this.opts,i=e.target;i.closest(T)&&this.handleClick(e),t&&i.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(e)}),_(this,"onMouseDown",e=>{this.pressed=!0;let t=f(e.target,T),i=t&&t.adpCell;m(i.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),m(i.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),_(this,"onMouseMove",e=>{if(!this.pressed||!this.dp.isMinViewReached)return;e.preventDefault();let t=f(e.target,T),i=t&&t.adpCell,{selectedDates:s,rangeDateTo:a,rangeDateFrom:n}=this.dp;if(!i||i.isDisabled)return;let{date:r}=i;if(2===s.length){if(this.rangeFromFocused&&!v(r,a)){let{hours:h,minutes:o}=l(n);r.setHours(h),r.setMinutes(o),this.dp.rangeDateFrom=r,this.dp.replaceDate(n,r)}if(this.rangeToFocused&&!g(r,n)){let{hours:d,minutes:c}=l(a);r.setHours(d),r.setMinutes(c),this.dp.rangeDateTo=r,this.dp.replaceDate(a,r)}}}),_(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),_(this,"onChangeViewDate",(e,t)=>{if(!this.isVisible)return;let i=u(e),a=u(t);switch(this.dp.currentView){case s.days:if(m(e,t,s.months))return;break;case s.months:if(m(e,t,s.years))return;break;case s.years:if(i[0]===a[0]&&i[1]===a[1])return}this.render()}),_(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(e=>{this.$cells.appendChild(e.render())})}),this.dp=t,this.type=i,this.opts=a,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===s.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:t}=this.opts;D(this.$el,"mouseover",this.onMouseOverCell),D(this.$el,"mouseout",this.onMouseOutCell),D(this.$el,"click",this.onClickBody),e&&t&&(D(this.$el,"mousedown",this.onMouseDown),D(this.$el,"mousemove",this.onMouseMove),D(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=r({className:`air-datepicker-body -${this.type}-`,innerHtml:S[this.type]}),this.$names=n(".air-datepicker-body--day-names",this.$el),this.$cells=n(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",i=this.dp.isWeekend,{onClickDayName:a}=this.opts,n=e,r=0;for(;r<7;){let h=n%7;t+=`<div class="${p("air-datepicker-body--day-name",{[s.cssClassWeekend]:i(h),"-clickable-":!!a})}" data-day-index='${h}'>${this.dp.locale.daysMin[h]}</div>`,r++,n++}return t}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:t,dp:i,opts:s}=this;return new M({type:t,dp:i,opts:s,date:e,body:this})}_generateCells(){F.getDatesFunction(this.type)(this.dp,e=>{this.cells.push(this._generateCell(e))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(e=>e.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,t){let{viewDate:i,opts:{fixedHeight:s},locale:{firstDay:a}}=e,n=o(i),{year:r,month:h}=l(i),d=new Date(r,h,1),c=new Date(r,h,n),u=d.getDay()-a,p=6-c.getDay()+a;u=u<0?u+7:u,p=p>6?p-7:p;let m=function(e,t){let{year:i,month:s,date:a}=l(e);return new Date(i,s,a-t)}(d,u),v=n+u+p,g=m.getDate(),{year:y,month:D}=l(m),f=0;s&&(v=42);let w=[];for(;f<v;){let b=new Date(y,D,g+f);t&&t(b),w.push(b),f++}return w}static getMonthsDates(e,t){let{year:i}=e.parsedViewDate,s=0,a=[];for(;s<12;){let n=new Date(i,s);a.push(n),t&&t(n),s++}return a}static getYearsDates(e,t){let i=u(e.viewDate),s=i[0]-1,a=i[1]+1,n=s,r=[];for(;n<=a;){let h=new Date(n,0);r.push(h),t&&t(h),n++}return r}static getDatesFunction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.days;return({[s.days]:F.getDaysDates,[s.months]:F.getMonthsDates,[s.years]:F.getYearsDates})[e]}}function V(e,t,i){var s,a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(s=t))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class H{constructor(e){let{dp:t,opts:i}=e;V(this,"onClickNav",e=>{let t=f(e.target,".air-datepicker-nav--action");if(!t)return;let i=t.dataset.action;this.dp[i]()}),V(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),V(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),V(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),V(this,"update",()=>{let{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()}),V(this,"renderDelay",()=>{setTimeout(this.render)}),V(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(e,t){for(let i in t)t[i]?e.classList.add(i):e.classList.remove(i)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=t,this.opts=i,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=n(".air-datepicker-nav--title",this.$el),this.$prev=n('[data-action="prev"]',this.$el),this.$next=n('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(s.eventChangeTime,this.render))}destroy(){this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(s.eventChangeTime,this.render))}_createElement(){this.$el=r({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:t}=this,i=t.navTitles[e.currentView];return"function"==typeof i?i(e):e.formatDate(e.viewDate,i)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:t,maxDate:i}=this.dp;if(!t&&!i||!e)return;let{year:a,month:n}=this.dp.parsedViewDate,r=!!t&&l(t),h=!!i&&l(i);switch(this.dp.currentView){case s.days:t&&r.month>=n&&r.year>=a&&this._disableNav("prev"),i&&h.month<=n&&h.year<=a&&this._disableNav("next");break;case s.months:t&&r.year>=a&&this._disableNav("prev"),i&&h.year<=a&&this._disableNav("next");break;case s.years:{let o=u(this.dp.viewDate);t&&r.year>=o[0]&&this._disableNav("prev"),i&&h.year<=o[1]&&this._disableNav("next")}}}_disableNav(e){n('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];e.length?e.forEach(e=>{e.classList.remove(...i)}):e.classList.remove(...i)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${t}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find(t=>"function"==typeof e[t])}}var x={today:{content:e=>e.locale.today,onClick:e=>e.setViewDate(new Date)},clear:{content:e=>e.locale.clear,onClick:e=>e.clear()}};class L{constructor(e){let{dp:t,opts:i}=e;this.dp=t,this.opts=i,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=r({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach(e=>{let t=e;"string"==typeof e&&x[e]&&(t=x[e]);let i=this.createButton(t);t.onClick&&this.attachEventToButton(i,t.onClick),this.$el.appendChild(i)})}attachEventToButton(e,t){e.addEventListener("click",()=>{t(this.dp)})}createButton(e){let{content:t,className:i,tagName:s="button",attrs:a={}}=e;return r({tagName:s,innerHtml:`<span tabindex='-1'>${"function"==typeof t?t(this.dp):t}</span>`,className:p("air-datepicker-button",i),attrs:a})}render(){this.generateButtons()}}function E(e,t,i){var s,a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(s=t))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A{constructor(){let{opts:e,dp:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,"toggleTimepickerIsActive",e=>{this.dp.timepickerIsActive=e}),E(this,"onChangeSelectedDate",e=>{let{date:t,updateTime:i=!1}=e;t&&(this.setMinMaxTime(t),this.setCurrentTime(!!i&&t),this.addTimeToDate(t))}),E(this,"onChangeLastSelectedDate",e=>{e&&(this.setTime(e),this.render())}),E(this,"onChangeInputRange",e=>{let t=e.target;this[t.getAttribute("name")]=t.value,this.updateText(),this.dp.trigger(s.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),E(this,"onMouseEnterLeave",e=>{let t=e.target.getAttribute("name"),i=this.$minutesText;"hours"===t&&(i=this.$hoursText),i.classList.toggle("-focus-")}),E(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),E(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=e,this.dp=t;let{timeFormat:i}=this.dp.locale;i&&(i.match(C("h"))||i.match(C("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),D(this.$ranges,e,this.onChangeInputRange),D(this.$ranges,"mouseenter",this.onMouseEnterLeave),D(this.$ranges,"mouseleave",this.onMouseEnterLeave),D(this.$ranges,"focus",this.onFocus),D(this.$ranges,"mousedown",this.onFocus),D(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=r({className:p("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:t,displayHours:i,minutes:s,minHours:a,minMinutes:n,maxHours:r,maxMinutes:h,dayPeriod:o,opts:{hoursStep:l,minutesStep:d}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${c(i)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${c(s)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${o}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${t}" min="${a}" max="${r}" step="${l}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${s}" min="${n}" max="${h}" step="${d}"/>   </div></div>`}defineDOM(){let e=e=>n(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:t,maxDate:i}=this.dp;t&&m(e,t)&&this.setMinTimeFromMinDate(t),i&&m(e,i)&&this.setMaxTimeFromMaxDate(i)}}setCurrentTime(e){let{hours:t,minutes:i}=e?l(e):this;this.hours=w(t,this.minHours,this.maxHours),this.minutes=w(i,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:t,maxHours:i,maxMinutes:s}=this.opts;this.minHours=w(e,0,23),this.minMinutes=w(t,0,59),this.maxHours=w(i,0,23),this.maxMinutes=w(s,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:t}=this.dp;this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:t}=this.dp;this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){h(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,h(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=c(this.displayHours),this.$minutesText.innerHTML=c(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:t,dayPeriod:i}=d(e);this.displayHours=this.ampm?t:e,this.dayPeriod=i}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function N(e,t,i){var s,a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(s=t))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class O{constructor(e){let{dp:t,opts:i}=e;N(this,"pressedKeys",new Set),N(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"],],e=>e.month++,],[[["Control","ArrowLeft"],["Control","ArrowDown"],],e=>e.month--,],[[["Shift","ArrowRight"],["Shift","ArrowUp"],],e=>e.year++,],[[["Shift","ArrowLeft"],["Shift","ArrowDown"],],e=>e.year--,],[[["Alt","ArrowRight"],["Alt","ArrowUp"],],e=>e.year+=10,],[[["Alt","ArrowLeft"],["Alt","ArrowDown"],],e=>e.year-=10,],[["Control","Shift","ArrowUp"],(e,t)=>t.up()],])),N(this,"handleHotKey",e=>{let t=this.hotKeys.get(e),i=l(this.getInitialFocusDate());t(i,this.dp);let{year:s,month:a,date:n}=i,r=o(new Date(s,a));r<n&&(n=r);let h=this.dp.getClampedDate(new Date(s,a,n));this.dp.setFocusDate(h,{viewDateTransition:!0})}),N(this,"isHotKeyPressed",()=>{let e=!1,t=this.pressedKeys.size,i=e=>this.pressedKeys.has(e);for(let[s]of this.hotKeys){if(e)break;if(Array.isArray(s[0]))s.forEach(a=>{e||t!==a.length||(e=a.every(i)&&s)});else{if(t!==s.length)continue;e=s.every(i)&&s}}return e}),N(this,"isArrow",e=>e>=37&&e<=40),N(this,"onKeyDown",e=>{let{key:t,which:i}=e,{dp:s,dp:{focusDate:a},opts:n}=this;this.registerKey(t);let r=this.isHotKeyPressed();if(r)return e.preventDefault(),void this.handleHotKey(r);if(this.isArrow(i))return e.preventDefault(),void this.focusNextCell(t);if("Enter"===t){if(s.currentView!==n.minView)return void s.down();if(a){let h=s._checkIfDateIsSelected(a);return void(h?s._handleAlreadySelectedDates(h,a):s.selectDate(a))}}"Escape"===t&&this.dp.hide()}),N(this,"onKeyUp",e=>{this.removeKey(e.key)}),this.dp=t,this.opts=i,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:t,selectedDates:i,parsedViewDate:{year:a,month:n}}=this.dp,r=e||i[i.length-1];if(!r)switch(t){case s.days:r=new Date(a,n,new Date().getDate());break;case s.months:r=new Date(a,n,1);break;case s.years:r=new Date(a,0,1)}return r}focusNextCell(e){let t=this.getInitialFocusDate(),{currentView:i}=this.dp,{days:a,months:n,years:r}=s,h=l(t),o=h.year,d=h.month,c=h.date;switch(e){case"ArrowLeft":i===a&&(c-=1),i===n&&(d-=1),i===r&&(o-=1);break;case"ArrowUp":i===a&&(c-=7),i===n&&(d-=3),i===r&&(o-=4);break;case"ArrowRight":i===a&&(c+=1),i===n&&(d+=1),i===r&&(o+=1);break;case"ArrowDown":i===a&&(c+=7),i===n&&(d+=3),i===r&&(o+=4)}let u=this.dp.getClampedDate(new Date(o,d,c));this.dp.setFocusDate(u,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}function I(e,t,i){var s,a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(s=t))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let P="",B="",R=!1;class K{static buildGlobalContainer(e){R=!0,P=r({className:e,id:e}),n("body").appendChild(P)}constructor(e,t){var i=this;if(I(this,"viewIndexes",[s.days,s.months,s.years]),I(this,"next",()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(e,t+1,1));break;case s.months:this.setViewDate(new Date(e+1,t,1));break;case s.years:this.setViewDate(new Date(e+10,0,1))}}),I(this,"prev",()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(e,t-1,1));break;case s.months:this.setViewDate(new Date(e-1,t,1));break;case s.years:this.setViewDate(new Date(e-10,0,1))}}),I(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),I(this,"setPosition",function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(e=e||i.opts.position))return void(i.customHide=e({$datepicker:i.$datepicker,$target:i.$el,$pointer:i.$pointer,isViewChange:t,done:i._finishHide}));let s,a,{isMobile:n}=i.opts,r=i.$el.getBoundingClientRect(),h=i.$el.getBoundingClientRect(),o=i.$datepicker.offsetParent,l=i.$el.offsetParent,d=i.$datepicker.getBoundingClientRect(),c=e.split(" "),u=window.scrollY,p=window.scrollX,m=i.opts.offset,v=c[0],g=c[1];if(n)i.$datepicker.style.cssText="left: 50%; top: 50%";else{if(o===l&&o!==document.body&&(h={top:i.$el.offsetTop,left:i.$el.offsetLeft,width:r.width,height:i.$el.offsetHeight},u=0,p=0),o!==l&&o!==document.body){let y=o.getBoundingClientRect();h={top:r.top-y.top,left:r.left-y.left,width:r.width,height:r.height},u=0,p=0}switch(v){case"top":s=h.top-d.height-m;break;case"right":a=h.left+h.width+m;break;case"bottom":s=h.top+h.height+m;break;case"left":a=h.left-d.width-m}switch(g){case"top":s=h.top;break;case"right":a=h.left+h.width-d.width;break;case"bottom":s=h.top+h.height-d.height;break;case"left":a=h.left;break;case"center":/left|right/.test(v)?s=h.top+h.height/2-d.height/2:a=h.left+h.width/2-d.width/2}i.$datepicker.style.cssText=`left: ${a+p}px; top: ${s+u}px`}}),I(this,"_setInputValue",()=>{let{opts:e,$altField:t,locale:{dateFormat:i}}=this,{altFieldDateFormat:s,altField:a}=e;a&&t&&(t.value=this._getInputValue(s)),this.$el.value=this._getInputValue(i)}),I(this,"_getInputValue",e=>{let{selectedDates:t,opts:i}=this,{multipleDates:s,multipleDatesSeparator:a}=i;if(!t.length)return"";let n="function"==typeof e,r=n?e(s?t:t[0]):t.map(t=>this.formatDate(t,e));return n?r:r.join(a)}),I(this,"_checkIfDateIsSelected",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.days,a=!1;return i.selectedDates.some(i=>{let s=m(e,i,t);return a=s&&i,s}),a}),I(this,"_scheduleCallAfterTransition",e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),I(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),I(this,"setViewDate",e=>{if(!((e=k(e))instanceof Date)||m(e,this.viewDate))return;let t=this.viewDate;this.viewDate=e;let{onChangeViewDate:i}=this.opts;if(i){let{month:a,year:n}=this.parsedViewDate;i({month:a,year:n,decade:this.curDecade})}this.trigger(s.eventChangeViewDate,e,t)}),I(this,"setFocusDate",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=k(e))instanceof Date)&&(i.focusDate=e,i.trigger(s.eventChangeFocusDate,e,t))}),I(this,"setCurrentView",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i.viewIndexes.includes(e)){if(i.currentView=e,i.elIsInput&&i.visible&&i.setPosition(void 0,!0),i.trigger(s.eventChangeCurrentView,e),!i.views[e]){let a=i.views[e]=new F({dp:i,opts:i.opts,type:e});i.shouldUpdateDOM&&i.$content.appendChild(a.$el)}i.opts.onChangeView&&!t.silent&&i.opts.onChangeView(e)}}),I(this,"_updateLastSelectedDate",e=>{this.lastSelectedDate=e,this.trigger(s.eventChangeLastSelectedDate,e)}),I(this,"destroy",()=>{if(this.isDestroyed)return;let{showEvent:e,isMobile:t}=this.opts,i=this.$datepicker.parentNode;i&&i.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0}),I(this,"update",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=b({},i.opts),{silent:n}=t;b(i.opts,e);let{timepicker:r,buttons:h,range:o,selectedDates:l,isMobile:d}=i.opts,c=i.visible||i.treatAsInline;i._createMinMaxDates(),i._limitViewDateByMaxMinDates(),i._handleLocale(),l&&(i.selectedDates=[],i.selectDate(l,{silent:n})),e.view&&i.setCurrentView(e.view,{silent:n}),i._setInputValue(),a.range&&!o?(i.rangeDateTo=!1,i.rangeDateFrom=!1):!a.range&&o&&i.selectedDates.length&&(i.rangeDateFrom=i.selectedDates[0],i.rangeDateTo=i.selectedDates[1]),a.timepicker&&!r?(c&&i.timepicker.destroy(),i.timepicker=!1,i.$timepicker.parentNode.removeChild(i.$timepicker)):!a.timepicker&&r&&i._addTimepicker(),!a.buttons&&h?i._addButtons():a.buttons&&!h?(i.buttons.destroy(),i.$buttons.parentNode.removeChild(i.$buttons)):c&&a.buttons&&h&&i.buttons.clearHtml().render(),!a.isMobile&&d?(i.treatAsInline||B||i._createMobileOverlay(),i._addMobileAttributes(),i.visible&&i._showMobileOverlay()):a.isMobile&&!d&&(i._removeMobileAttributes(),i.visible&&(B.classList.remove("-active-"),"function"!=typeof i.opts.position&&i.setPosition())),c&&(i.nav.update(),i.views[i.currentView].render(),i.currentView===s.days&&i.views[i.currentView].renderDayNames())}),I(this,"disableDate",(e,t)=>{(Array.isArray(e)?e:[e]).forEach(e=>{let i=k(e);if(!i)return;this.disabledDates[t?"delete":"add"](this.formatDate(i,"yyyy-MM-dd"));let s=this.getCell(i,this.currentViewSingular);s&&s.adpCell.render()},[])}),I(this,"enableDate",e=>{this.disableDate(e,!0)}),I(this,"isDateDisabled",e=>{let t=k(e);return this.disabledDates.has(this.formatDate(t,"yyyy-MM-dd"))}),I(this,"isOtherMonth",e=>{let{month:t}=l(e);return t!==this.parsedViewDate.month}),I(this,"isOtherYear",e=>{let{year:t}=l(e);return t!==this.parsedViewDate.year}),I(this,"isOtherDecade",e=>{let{year:t}=l(e),[i,s]=u(this.viewDate);return t<i||t>s}),I(this,"_onChangeSelectedDate",e=>{let{silent:t}=e;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()})}),I(this,"_onChangeFocusedDate",function(e){let{viewDateTransition:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;let s=!1;t&&(s=i.isOtherMonth(e)||i.isOtherYear(e)||i.isOtherDecade(e)),s&&i.setViewDate(e),i.opts.onFocus&&i.opts.onFocus({datepicker:i,date:e})}),I(this,"_onChangeTime",e=>{let{hours:t,minutes:i}=e,s=new Date,{lastSelectedDate:a,opts:{onSelect:n}}=this,r=a;a||(r=s);let h=this.getCell(r,this.currentViewSingular),o=h&&h.adpCell;o&&o.isDisabled||(r.setHours(t),r.setMinutes(i),a?(this._setInputValue(),n&&this._triggerOnSelect()):this.selectDate(r))}),I(this,"_onFocus",e=>{this.visible||this.show()}),I(this,"_onBlur",e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),I(this,"_onMouseDown",e=>{this.inFocus=!0}),I(this,"_onMouseUp",e=>{this.inFocus=!1,this.$el.focus()}),I(this,"_onResize",()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()}),I(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),I(this,"getViewDates",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.days;return F.getDatesFunction(e)(i)}),I(this,"isWeekend",e=>this.opts.weekends.includes(e)),I(this,"getClampedDate",e=>{let{minDate:t,maxDate:i}=this,s=e;return i&&v(e,i)?s=i:t&&g(e,t)&&(s=t),s}),this.$el=n(e),!this.$el)return;this.$datepicker=r({className:"air-datepicker"}),this.opts=b({},a,t),this.$customContainer=!!this.opts.container&&n(this.opts.container),this.$altField=n(this.opts.altField||!1);let{view:h,startDate:o}=this.opts;o||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=k(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=h,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:t,opts:{inline:i,isMobile:s,selectedDates:a,keyboardNav:r,onlyTimepicker:h}}=this,o=n("body");R&&(!R||!P||o.contains(P))||i||!this.elIsInput||this.$customContainer||K.buildGlobalContainer(K.defaultGlobalContainerId),!s||B||t||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),r&&!h&&(this.keyboardNav=new O({dp:this,opts:e}))),a&&this.selectDate(a,{silent:!0}),this.opts.visible&&!t&&this.show(),s&&!t&&this.$el.setAttribute("readonly",!0),t&&this._createComponents()}_createMobileOverlay(){B=r({className:"air-datepicker-overlay"}),P.appendChild(B)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:i,buttons:s,timepicker:a,position:n,classes:r,onlyTimepicker:h,isMobile:o}}=this;this._buildBaseHtml(),this.elIsInput&&(i||this._setPositionClasses(n)),!i&&this.elIsInput||this.$datepicker.classList.add("-inline-"),r&&this.$datepicker.classList.add(...r.split(" ")),h&&this.$datepicker.classList.add("-only-timepicker-"),o&&!t&&this._addMobileAttributes(),this.views[this.currentView]=new F({dp:this,type:this.currentView,opts:e}),this.nav=new H({dp:this,opts:e}),a&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){B.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){B.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:e,maxDate:t}=this.opts;this.minDate=!!e&&k(e),this.maxDate=!!t&&k(t)}_addTimepicker(){this.$timepicker=r({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new A({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=r({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new L({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(s.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(s.eventChangeFocusDate,this._onChangeFocusedDate),this.on(s.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){var e,t;let{inline:i}=this.opts;this.elIsInput?i?(e=this.$datepicker,(t=this.$el).parentNode.insertBefore(e,t.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=n(".air-datepicker--content",this.$datepicker),this.$pointer=n(".air-datepicker--pointer",this.$datepicker),this.$nav=n(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){var e;let{locale:t,dateFormat:i,firstDay:s,timepicker:a,onlyTimepicker:n,timeFormat:r,dateTimeSeparator:h}=this.opts;this.locale=JSON.parse(JSON.stringify(e=t)),i&&(this.locale.dateFormat=i),void 0!==r&&""!==r&&(this.locale.timeFormat=r);let{timeFormat:o}=this.locale;""!==s&&(this.locale.firstDay=s),a&&"function"!=typeof i&&(this.locale.dateFormat=[this.locale.dateFormat,o||""].join(o?h:"")),n&&"function"!=typeof i&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if("function"==typeof e)return void this.$datepicker.classList.add("-custom-position-");let t=(e=e.split(" "))[0],i=`air-datepicker -${t}-${e[1]}- -from-${t}-`;this.$datepicker.classList.add(...i.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:t,maxDate:i}=this;i&&v(e,i)&&this.setViewDate(i),t&&g(e,t)&&this.setViewDate(t)}formatDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,t=arguments.length>1?arguments[1]:void 0;if(!((e=k(e))instanceof Date))return;let i=t,s=this.locale,a=l(e),n=a.dayPeriod,r=u(e),h=K.replacer,o={T:e.getTime(),m:a.minutes,mm:a.fullMinutes,h:a.hours12,hh:a.fullHours12,H:a.hours,HH:a.fullHours,aa:n,AA:n.toUpperCase(),E:s.daysShort[a.day],EEEE:s.days[a.day],d:a.date,dd:a.fullDate,M:a.month+1,MM:a.fullMonth,MMM:s.monthsShort[a.month],MMMM:s.months[a.month],yy:a.year.toString().slice(-2),yyyy:a.year,yyyy1:r[0],yyyy2:r[1]};for(let[d,c]of Object.entries(o))i=h(i,C(d),c);return i}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:a,parsedViewDate:n,selectedDates:r}=this,{updateTime:h}=i,{moveToOtherMonthsOnSelect:o,moveToOtherYearsOnSelect:l,multipleDates:d,range:c,autoClose:u,onBeforeSelect:p}=this.opts,m=r.length;if(Array.isArray(e))return e.forEach(e=>{this.selectDate(e,i)}),new Promise(e=>{setTimeout(e)});if((e=k(e))instanceof Date){if(p&&!p({date:e,datepicker:this}))return Promise.resolve();if(a===s.days&&e.getMonth()!==n.month&&o&&(t=new Date(e.getFullYear(),e.getMonth(),1)),a===s.years&&e.getFullYear()!==n.year&&l&&(t=new Date(e.getFullYear(),0,1)),t&&this.setViewDate(t),d&&!c){if(m===d)return;this._checkIfDateIsSelected(e)||r.push(e)}else if(c)switch(m){case 1:r.push(e),this.rangeDateTo||(this.rangeDateTo=e),v(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,silent:null==i?void 0:i.silent,date:e,updateTime:h}),this._updateLastSelectedDate(e),u&&!this.timepickerIsActive&&this.visible&&(d||c?c&&1===m&&this.hide():this.hide()),new Promise(e=>{setTimeout(e)})}}unselectDate(e){let t=this.selectedDates,i=this;if((e=k(e))instanceof Date)return t.some((a,n)=>{if(m(a,e))return t.splice(n,1),i.selectedDates.length?(i.rangeDateTo="",i.rangeDateFrom=t[0],i._updateLastSelectedDate(i.selectedDates[i.selectedDates.length-1])):(i.rangeDateFrom="",i.rangeDateTo="",i._updateLastSelectedDate(!1)),this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,date:e}),!0})}replaceDate(e,t){let i=this.selectedDates.find(t=>m(t,e,this.currentView)),a=this.selectedDates.indexOf(i);a<0||m(this.selectedDates[a],t,this.currentView)||(this.selectedDates[a]=t,this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,date:t,updateTime:!0}),this._updateLastSelectedDate(t))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,silent:e.silent}),new Promise(e=>{setTimeout(e)})}show(){let{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:t}=this.opts,i=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(t=>{this.customHide||(!t||!i)&&(t||i)||this._finishHide(),e&&e(t)}),t&&B.classList.remove("-active-")}_triggerOnSelect(){let e=[],t=[],{selectedDates:i,locale:s,opts:{onSelect:a,multipleDates:n,range:r}}=this,h=n||r,o="function"==typeof s.dateFormat;i.length&&(e=i.map(y),t=o?n?s.dateFormat(e):e.map(e=>s.dateFormat(e)):e.map(e=>this.formatDate(e,s.dateFormat))),a({date:h?e:e[0],formattedDate:h?t:t[0],datepicker:this})}_handleAlreadySelectedDates(e,t){let{selectedDates:i,rangeDateFrom:s,rangeDateTo:a}=this,{range:n,toggleSelected:r}=this.opts,h=i.length,o="function"==typeof r?r({datepicker:this,date:t}):r,l=Boolean(n&&1===h&&e),d=l?y(t):t;n&&!o&&(2!==h&&this.selectDate(d),2===h&&m(s,a))||(o?this.unselectDate(d):this._updateLastSelectedDate(l?d:e))}_handleUpDownActions(e,t){if(!((e=k(e||this.focusDate||this.viewDate))instanceof Date))return;let i="up"===t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}getCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.day;if(!((e=k(e))instanceof Date))return;let{year:i,month:a,date:n}=l(e),r=`[data-year="${i}"]`,h=`[data-month="${a}"]`,o={[s.day]:`${r}${h}[data-date="${n}"]`,[s.month]:`${r}${h}`,[s.year]:`${r}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(o[t]):void 0}_showMobileOverlay(){B.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((e,t)=>parseFloat(t)+e,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return l(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return u(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===s.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===s.days}get $container(){return this.$customContainer||P}static replacer(e,t,i){return e.replace(t,function(e,t,s,a){return t+i+a})}}return I(K,"defaults",a),I(K,"version","3.5.3"),I(K,"defaultGlobalContainerId","air-datepicker-global-container"),Object.assign(e=K.prototype,{on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter(e=>e!==t))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.__events&&this.__events[e]&&this.__events[e].forEach(e=>{e(...i)})}}),i.default}()});